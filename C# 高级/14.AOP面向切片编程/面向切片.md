# AOP介绍

面向切面编程（AOP）是一种编程范式，是面向对象编程的一种补充，是一种思维，旨在通过横切关注点的方式来解耦系统中的各个模块。横切关注点指的是那些不属于业务逻辑本身，但是会影响多个模块的代码，比如日志记录、事务管理、安全性等。AOP的核心思想是将这些横切关注点从业务逻辑中分离出来，形成独立的切面（Aspect）。切面包含了横切关注点的代码，当程序执行到特定的点（切点）时，切面的代码就会被执行，从而实现了与业务逻辑的解耦。

# AOP使用

设计模式中的装饰器模式，代理模式便是AOP的一种编程思想。

```csharp
public class DecoratorAOP
{
    public static void Show()
    {
        User user = new User()
        {
            Name = "张三",
            Password = "123123123123"
        };
        IUserProcessor processor = new UserProcessor();
        processor.RegUser(user);
        Console.WriteLine("***************");

        processor = new UserProcessorDecorator(processor);
        processor.RegUser(user);
    }

    public interface IUserProcessor
    {
        void RegUser(User user);
    }
    public class UserProcessor : IUserProcessor
    {
        public void RegUser(User user)
        {
            Console.WriteLine("用户已注册。Name:{0},PassWord:{1}", user.Name, user.Password);
        }
    }
    /// <summary>
    /// 装饰器的模式去提供一个AOP功能
    /// </summary>
    public class UserProcessorDecorator : IUserProcessor
    {
        private IUserProcessor _UserProcessor { get; set; }
        public UserProcessorDecorator(IUserProcessor userprocessor)
        {
            this._UserProcessor = userprocessor;
        }

        public void RegUser(User user)
        {
            BeforeProceed(user);

            this._UserProcessor.RegUser(user);

            AfterProceed(user);
        }

        /// <summary>
        /// 业务逻辑之前
        /// </summary>
        /// <param name="user"></param>
        private void BeforeProceed(User user)
        {
            Console.WriteLine("方法执行前");
        }
        /// <summary>
        /// 业务逻辑之后
        /// </summary>
        /// <param name="user"></param>
        private void AfterProceed(User user)
        {
            Console.WriteLine("方法执行后");
        }
    }

}
```

通过BeforeProceed，AfterProceed方法就是一种补充，代理模式跟装饰器模式类似，区别在于代理模式是用属性赋值给_UserProcessor：private IUserProcessor _UserProcessor = new UserProcessor();